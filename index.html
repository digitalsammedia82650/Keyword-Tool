<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Keyword Architect Pro | Advanced Logic</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===========================
   MODERN UI (Ahrefs / Uber)
=========================== */
#kap-app{
  max-width:900px;
  margin:30px auto;
  background:#ffffff;
  padding:30px;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  color:#1e293b;
}
#kap-app h1 { margin:0; font-size:24px; color:#0f172a; }
#kap-app .sub { font-size:13px; color:#64748b; margin-bottom:20px; }

.kap-tabs { display:flex; gap:10px; margin-bottom:20px; border-bottom:1px solid #e2e8f0; }
.kap-tabs button {
  padding:12px 20px; border:none; background:none;
  font-weight:600; cursor:pointer; color:#64748b;
  border-bottom:2px solid transparent;
}
.kap-tabs button.active { color:#2563eb; border-bottom-color:#2563eb; }

.input-group { margin-bottom:15px; }
.input-label {
  display:block; font-size:12px; font-weight:700;
  margin-bottom:5px; color:#475569;
}

#kap-app input, #kap-app textarea, #kap-app select {
  width:100%; padding:12px; border-radius:8px;
  border:1px solid #cbd5e1; font-size:14px;
  box-sizing:border-box;
}

#kap-app button.main-btn {
  width:100%; padding:15px; border:none;
  border-radius:8px; background:#2563eb;
  color:#fff; font-size:15px; font-weight:700;
  cursor:pointer;
}

.results-label {
  margin-top:25px; font-size:11px; font-weight:800;
  color:#1e40af; text-transform:uppercase;
  letter-spacing:1px;
}

#output-text {
  width:100%; height:200px; margin-top:10px;
  padding:12px; background:#f8fafc;
  border:1px solid #e2e8f0; border-radius:8px;
  font-family:monospace; font-size:13px;
}

.kap-hidden{display:none;}
</style>
</head>

<body>

<div id="kap-app">
  <h1>Keyword Architect Pro</h1>
  <div class="sub">Grammar-Safe Query Construction Engine</div>

  <div class="kap-tabs">
    <button id="tab-query" class="active" onclick="kapSwitch('query')">Query Builder</button>
    <button id="tab-content" onclick="kapSwitch('content')">Content Extractor</button>
  </div>

  <!-- ================= QUERY BUILDER ================= -->
  <div id="kap-query">
    <div class="input-group">
      <label class="input-label">Seed Keyword</label>
      <input id="seed" placeholder="e.g. bookmark">
    </div>

    <div class="input-group">
      <label class="input-label">Locations (comma separated)</label>
      <input id="location" placeholder="New York, London">
    </div>

    <div class="input-group">
      <label class="input-label">Add Additional Phrase?</label>
      <select id="modifier-type">
        <option value="">— None —</option>
        <option value="context">Contextual modifier</option>
        <option value="intent">Intent modifier</option>
        <option value="expansion">Query expansion phrase</option>
        <option value="prepositional">Prepositional adjunct</option>
        <option value="verb">Verb / Interrogative clause</option>
      </select>
    </div>

    <div class="input-group">
      <label class="input-label">Modifier Text</label>
      <input id="modifier-text" placeholder="e.g. Who did it">
    </div>

    <button class="main-btn" onclick="runQuery()">Generate Keywords</button>
  </div>

  <!-- ================= CONTENT EXTRACTOR ================= -->
  <div id="kap-content" class="kap-hidden">
    <div class="input-group">
      <label class="input-label">Keyword to Extract</label>
      <input id="content-seed">
    </div>
    <div class="input-group">
      <label class="input-label">Paste Content</label>
      <textarea id="content-input"></textarea>
    </div>
    <button class="main-btn" onclick="runContent()">Extract</button>
  </div>

  <div class="results-label">Final Output</div>
  <textarea id="output-text" readonly></textarea>
</div>

<script>
/* =======================
   GRAMMAR ENGINE
======================= */
const Grammar = {
  plural:w=>w.endsWith("s")?w:w+"s",
  article:w=>/^[aeiou]/i.test(w)?"an":"a",
  blueprints:[
    s=>`How to use ${Grammar.article(s)} ${s}`,
    s=>`Best ${s} for professionals`,
    s=>`Affordable ${Grammar.plural(s)} available online`,
    s=>`Where to buy ${Grammar.article(s)} ${s}`,
    s=>`Professional ${s} guide 2025`
  ]
};

/* =======================
   QUERY BUILDER (FIXED)
======================= */
function runQuery(){
  const seed=document.getElementById("seed").value.trim();
  const locInput=document.getElementById("location").value.trim();
  const modType=document.getElementById("modifier-type").value;
  const modText=document.getElementById("modifier-text").value.trim();

  if(!seed) return alert("Enter seed keyword");

  const interrogatives=["how","where","what","why","when","who","which"];
  const locations=locInput?locInput.split(",").map(l=>l.trim()):[""];
  let output=[];

  locations.forEach(loc=>{
    Grammar.blueprints.forEach(tpl=>{
      let base=tpl(seed);
      let baseLower=base.toLowerCase();
      let parts=[];

      const baseIsQuestion=interrogatives.some(q=>baseLower.startsWith(q+" "));

      if(modType==="verb" && modText && !baseIsQuestion){
        parts.push(modText);
      }

      if(modType==="intent" && modText){
        base=`${modText} ${seed}`;
      }

      parts.push(base);

      if((modType==="context"||modType==="expansion") && modText){
        parts.push(modText);
      }

      if(loc) parts.push(`in ${loc}`);

      if(modType==="prepositional" && modText){
        parts.push(modText);
      }

      output.push(parts.join(" ").replace(/\s+/g," ").trim());
    });

    if(loc) output.push(`${seed} near ${loc}`);
  });

  document.getElementById("output-text").value=output.join("\n");
}

/* =======================
   CONTENT EXTRACTOR
======================= */
function runContent(){
  const seed=document.getElementById("content-seed").value.trim().toLowerCase();
  const text=document.getElementById("content-input").value;
  if(!seed||!text) return alert("Missing input");

  const segments=text.split(/\n|(?<=[.!?])\s+/);
  const matches=segments.filter(s=>s.toLowerCase().includes(seed));
  document.getElementById("output-text").value=matches.join("\n\n");
}

/* =======================
   UI
======================= */
function kapSwitch(m){
  document.getElementById("tab-query").className=m==="query"?"active":"";
  document.getElementById("tab-content").className=m==="content"?"active":"";
  document.getElementById("kap-query").className=m==="query"?"":"kap-hidden";
  document.getElementById("kap-content").className=m==="content"?"":"kap-hidden";
  document.getElementById("output-text").value="";
}
</script>

</body>
</html>
